{"code":"/**\r\n * 查找对应节点\r\n * @param tree\r\n * @param id\r\n * @param key\r\n * @returns {undefined | any} tree | undefined\r\n */\r\nexport function treeFindDir(tree, id, key = 'resourceId') {\r\n    if (!(tree instanceof Array))\r\n        return;\r\n    for (let i = 0; i < tree.length; i += 1) {\r\n        const item = tree[i];\r\n        // eslint-disable-next-line consistent-return\r\n        if (item[key] === id)\r\n            return item;\r\n        if (item.children) {\r\n            const value = treeFindDir(item.children, id, key);\r\n            // eslint-disable-next-line consistent-return\r\n            if (value)\r\n                return value;\r\n        }\r\n    }\r\n}\r\nexport function translateUnicode(str) {\r\n    return str.replace(/\\\\u(\\d{4})/g, (...args) => unescape(`%u${args[1]}`));\r\n}\r\n// 电子课本封面压缩\r\nexport function getCoverUrl(url) {\r\n    if (url.indexOf('?') > -1) {\r\n        return `${url}&imageMogr2/size-limit/50k!`;\r\n    }\r\n    return `${url}?imageMogr2/size-limit/50k!`;\r\n}\r\n// 封面图片压缩， 基于原图的长宽，按指定百分比缩放。Scale取值范围1-999。\r\nexport function getThumbnailUrl(url, scale = 15) {\r\n    // bos 添加压缩参数\r\n    if (url.includes('bos.com')) {\r\n        return `${url}@q_${scale},f_webp`;\r\n    }\r\n    // cos 添加压缩参数\r\n    const index = url.indexOf('imageMogr2');\r\n    if (index > -1) {\r\n        return url.replace(/imageMogr2/, `imageMogr2/format/webp/thumbnail/!${scale}p`);\r\n    }\r\n    if (url.indexOf('?') > -1) {\r\n        return `${url}&imageMogr2/format/webp/thumbnail/!${scale}p`;\r\n    }\r\n    return `${url}?imageMogr2/format/webp/thumbnail/!${scale}p`;\r\n}\r\n/**\r\n * 时长转时间\r\n * @param duration\r\n */\r\nexport function durationToTime(duration) {\r\n    const mm = Math.floor(duration / 60);\r\n    const ss = (duration % 60).toFixed(0);\r\n    return `${mm.toString().padStart(2, '0')}:${ss.toString().padStart(2, '0')}`;\r\n}\r\nexport function sizeify(n) {\r\n    if (!n)\r\n        return '-';\r\n    const units = ['', 'K', 'M', 'G', 'T'];\r\n    let i = 0;\r\n    // eslint-disable-next-line\r\n    for (; n >= 1024; n >>= 10, i++)\r\n        ;\r\n    return `${n + units[i]}B`;\r\n}\r\nexport function toDate(stamp) {\r\n    const d = new Date(stamp * 1000);\r\n    return `${d.getFullYear()}-${((d.getMonth() + 1) / 100)\r\n        .toFixed(2)\r\n        .substr(2)}-${(d.getDate() / 100).toFixed(2).substr(2)}`;\r\n}\r\n//# sourceMappingURL=index.js.map","references":[],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/utils/index.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/zhuxiaojie/Desktop/private/rollup-utils-ts/types/src/utils/index.d.ts","writeByteOrderMark":false,"text":"/**\r\n * 查找对应节点\r\n * @param tree\r\n * @param id\r\n * @param key\r\n * @returns {undefined | any} tree | undefined\r\n */\r\nexport declare function treeFindDir(tree: any, id: any, key?: string): any;\r\nexport declare function translateUnicode(str: string): string;\r\nexport declare function getCoverUrl(url: string): string;\r\nexport declare function getThumbnailUrl(url: string, scale?: number): string;\r\n/**\r\n * 时长转时间\r\n * @param duration\r\n */\r\nexport declare function durationToTime(duration: number): string;\r\nexport declare function sizeify(n: number): string;\r\nexport declare function toDate(stamp: number): string;\r\n"}}
